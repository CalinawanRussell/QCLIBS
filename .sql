--------------------------------------------------------
--  File created - Thursday-April-10-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence BOOK_INCREMENT_ONE
--------------------------------------------------------

   CREATE SEQUENCE  "XEROJ"."BOOK_INCREMENT_ONE"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence BORROW_BOOK_INCREMENT_ONE
--------------------------------------------------------

   CREATE SEQUENCE  "XEROJ"."BORROW_BOOK_INCREMENT_ONE"  MINVALUE 1 MAXVALUE 999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table BOOKS
--------------------------------------------------------

  CREATE TABLE "XEROJ"."BOOKS" 
   (	"TITLE" VARCHAR2(255 BYTE), 
	"AUTHOR" VARCHAR2(255 BYTE), 
	"PUBLISHER" VARCHAR2(255 BYTE), 
	"PUBLICATION_DATE" DATE, 
	"GENRE" VARCHAR2(255 BYTE), 
	"BOOK_LANGUAGE" VARCHAR2(50 BYTE), 
	"PAGE_COUNT" NUMBER(*,0), 
	"QUANTITY" NUMBER(*,0), 
	"LAST_UPDATED" TIMESTAMP (6), 
	"BOOK_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table BORROWED_BOOKS
--------------------------------------------------------

  CREATE TABLE "XEROJ"."BORROWED_BOOKS" 
   (	"BORROW_ID" NUMBER(*,0), 
	"BORROWER_ID" VARCHAR2(10 BYTE), 
	"BORROWER_LN" VARCHAR2(25 BYTE), 
	"BORROWER_FN" VARCHAR2(25 BYTE), 
	"BORROW_DUE" DATE, 
	"BORROW_DATE" DATE, 
	"STATUS" VARCHAR2(20 BYTE), 
	"BOOK_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "XEROJ"."USERS" 
   (	"STUDENT_ID" VARCHAR2(10 BYTE), 
	"FIRST_NAME" VARCHAR2(25 BYTE), 
	"LAST_NAME" VARCHAR2(25 BYTE), 
	"EMAIL" VARCHAR2(50 BYTE), 
	"DATE_CREATED" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into XEROJ.BOOKS
SET DEFINE OFF;
Insert into XEROJ.BOOKS (TITLE,AUTHOR,PUBLISHER,PUBLICATION_DATE,GENRE,BOOK_LANGUAGE,PAGE_COUNT,QUANTITY,LAST_UPDATED,BOOK_ID) values ('asdad','asdawd','asdawd',to_date('08-APR-25','DD-MON-RR'),'sdawd','English',3,5,to_timestamp('08-APR-25 06.14.31.501000000 PM','DD-MON-RR HH.MI.SSXFF AM'),1);
Insert into XEROJ.BOOKS (TITLE,AUTHOR,PUBLISHER,PUBLICATION_DATE,GENRE,BOOK_LANGUAGE,PAGE_COUNT,QUANTITY,LAST_UPDATED,BOOK_ID) values ('What','haha','asdaw',to_date('08-APR-25','DD-MON-RR'),'tae','Filipino',2,8,to_timestamp('08-APR-25 07.11.26.840000000 PM','DD-MON-RR HH.MI.SSXFF AM'),2);
Insert into XEROJ.BOOKS (TITLE,AUTHOR,PUBLISHER,PUBLICATION_DATE,GENRE,BOOK_LANGUAGE,PAGE_COUNT,QUANTITY,LAST_UPDATED,BOOK_ID) values ('sad','sdaasd','asdas',to_date('09-APR-25','DD-MON-RR'),'asdasd','English',5,4,to_timestamp('09-APR-25 11.11.09.354000000 AM','DD-MON-RR HH.MI.SSXFF AM'),21);
Insert into XEROJ.BOOKS (TITLE,AUTHOR,PUBLISHER,PUBLICATION_DATE,GENRE,BOOK_LANGUAGE,PAGE_COUNT,QUANTITY,LAST_UPDATED,BOOK_ID) values ('asdas','asd','sdwad',to_date('09-APR-25','DD-MON-RR'),'awdasddaw','English',0,3,to_timestamp('09-APR-25 11.11.18.984000000 AM','DD-MON-RR HH.MI.SSXFF AM'),22);
REM INSERTING into XEROJ.BORROWED_BOOKS
SET DEFINE OFF;
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (2,'23-1853','Smith','John',to_date('01-APR-25','DD-MON-RR'),to_date('25-MAR-25','DD-MON-RR'),'Overdue',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (3,'23-1812','Doe','Jane',to_date('30-MAR-25','DD-MON-RR'),to_date('20-MAR-25','DD-MON-RR'),'Overdue',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (4,'23-1923','Brown','Alice',to_date('05-APR-25','DD-MON-RR'),to_date('28-MAR-25','DD-MON-RR'),'Overdue',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (5,'23-1235','Johnson','Emily',to_date('27-MAR-25','DD-MON-RR'),to_date('15-MAR-25','DD-MON-RR'),'Overdue',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (6,'23-1235','Williams','Michael',to_date('03-APR-25','DD-MON-RR'),to_date('22-MAR-25','DD-MON-RR'),'Overdue',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (22,'23-1853','Johnson','Emily',to_date('18-APR-25','DD-MON-RR'),to_date('10-APR-25','DD-MON-RR'),'Borrowed',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (23,'23-1812','Williams','Michael',to_date('22-APR-25','DD-MON-RR'),to_date('12-APR-25','DD-MON-RR'),'Borrowed',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (24,'23-1923','Taylor','Sophia',to_date('27-APR-25','DD-MON-RR'),to_date('14-APR-25','DD-MON-RR'),'Borrowed',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (25,'23-1235','Anderson','James',to_date('01-MAY-25','DD-MON-RR'),to_date('15-APR-25','DD-MON-RR'),'Borrowed',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (26,'23-1923','Thomas','Olivia',to_date('30-APR-25','DD-MON-RR'),to_date('16-APR-25','DD-MON-RR'),'Borrowed',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (27,'23-1235','Moore','William',to_date('05-MAY-25','DD-MON-RR'),to_date('17-APR-25','DD-MON-RR'),'Borrowed',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (28,'23-1235','Jackson','Emma',to_date('10-MAY-25','DD-MON-RR'),to_date('18-APR-25','DD-MON-RR'),'Borrowed',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (29,'23-1853','Garcia','Anna',to_date('15-MAR-25','DD-MON-RR'),to_date('01-MAR-25','DD-MON-RR'),'Returned',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (30,'23-1812','Martinez','Carlos',to_date('20-MAR-25','DD-MON-RR'),to_date('05-MAR-25','DD-MON-RR'),'Returned',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (31,'23-1923','Wilson','Emily',to_date('25-MAR-25','DD-MON-RR'),to_date('10-MAR-25','DD-MON-RR'),'Returned',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (32,'23-1235','Johnson','Michael',to_date('30-MAR-25','DD-MON-RR'),to_date('15-MAR-25','DD-MON-RR'),'Returned',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (33,'23-1853','Garcia','Anna',to_date('01-APR-25','DD-MON-RR'),to_date('20-MAR-25','DD-MON-RR'),'Returned',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (34,'23-1812','Martinez','Carlos',to_date('05-APR-25','DD-MON-RR'),to_date('25-MAR-25','DD-MON-RR'),'Returned',1);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (35,'23-1923','Wilson','Emily',to_date('07-APR-25','DD-MON-RR'),to_date('28-MAR-25','DD-MON-RR'),'Returned',2);
Insert into XEROJ.BORROWED_BOOKS (BORROW_ID,BORROWER_ID,BORROWER_LN,BORROWER_FN,BORROW_DUE,BORROW_DATE,STATUS,BOOK_ID) values (36,'23-1235','Johnson','Michael',to_date('08-APR-25','DD-MON-RR'),to_date('30-MAR-25','DD-MON-RR'),'Returned',1);
REM INSERTING into XEROJ.USERS
SET DEFINE OFF;
Insert into XEROJ.USERS (STUDENT_ID,FIRST_NAME,LAST_NAME,EMAIL,DATE_CREATED) values ('23-1853','John','Doe','john.doe@example.com',to_timestamp('04-APR-25 06.22.34.689000000 PM','DD-MON-RR HH.MI.SSXFF AM'));
Insert into XEROJ.USERS (STUDENT_ID,FIRST_NAME,LAST_NAME,EMAIL,DATE_CREATED) values ('23-1812','Jane','Smith','jane.smith@example.com',to_timestamp('04-APR-25 06.22.36.783000000 PM','DD-MON-RR HH.MI.SSXFF AM'));
Insert into XEROJ.USERS (STUDENT_ID,FIRST_NAME,LAST_NAME,EMAIL,DATE_CREATED) values ('23-1923','Alice','Johnson','alice.johnson@example.com',to_timestamp('04-APR-25 06.22.38.878000000 PM','DD-MON-RR HH.MI.SSXFF AM'));
Insert into XEROJ.USERS (STUDENT_ID,FIRST_NAME,LAST_NAME,EMAIL,DATE_CREATED) values ('23-1235','Bob','Brown','bob.brown@example.com',to_timestamp('04-APR-25 06.22.41.971000000 PM','DD-MON-RR HH.MI.SSXFF AM'));
--------------------------------------------------------
--  DDL for Index SYS_C007091
--------------------------------------------------------

  CREATE UNIQUE INDEX "XEROJ"."SYS_C007091" ON "XEROJ"."BORROWED_BOOKS" ("BORROW_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index BOOK_TITLE_INDEX
--------------------------------------------------------

  CREATE UNIQUE INDEX "XEROJ"."BOOK_TITLE_INDEX" ON "XEROJ"."BOOKS" ("TITLE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index BOOKS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XEROJ"."BOOKS_PK" ON "XEROJ"."BOOKS" ("BOOK_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Trigger BOOK_ID_AI
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "XEROJ"."BOOK_ID_AI" 
BEFORE INSERT ON books
FOR EACH ROW
BEGIN
    :NEW.book_ID := book_increment_one.NEXTVAL;
END;
/
ALTER TRIGGER "XEROJ"."BOOK_ID_AI" ENABLE;
--------------------------------------------------------
--  DDL for Trigger BOOK_UPDATED
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "XEROJ"."BOOK_UPDATED" 
BEFORE INSERT OR UPDATE ON books
FOR EACH ROW
BEGIN
    :new.last_updated := CURRENT_TIMESTAMP;
END;
/
ALTER TRIGGER "XEROJ"."BOOK_UPDATED" ENABLE;
--------------------------------------------------------
--  DDL for Trigger BORROWED_BOOKS_BIR
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "XEROJ"."BORROWED_BOOKS_BIR" 
BEFORE INSERT ON borrowed_books
FOR EACH ROW
BEGIN
    SELECT borrow_book_increment_one.NEXTVAL INTO :new.Borrow_id FROM dual;
END;
/
ALTER TRIGGER "XEROJ"."BORROWED_BOOKS_BIR" ENABLE;
--------------------------------------------------------
--  DDL for Trigger USER_CREATION_DATE
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "XEROJ"."USER_CREATION_DATE" 
BEFORE INSERT OR UPDATE on users
FOR EACH ROW
BEGIN
    :new.date_created := CURRENT_TIMESTAMP;
END;
/
ALTER TRIGGER "XEROJ"."USER_CREATION_DATE" ENABLE;
--------------------------------------------------------
--  Constraints for Table BOOKS
--------------------------------------------------------

  ALTER TABLE "XEROJ"."BOOKS" ADD CONSTRAINT "BOOKS_PK" PRIMARY KEY ("BOOK_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("BOOK_ID" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("BOOK_LANGUAGE" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("GENRE" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("PUBLICATION_DATE" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("PUBLISHER" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("AUTHOR" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("TITLE" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BOOKS" MODIFY ("QUANTITY" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table USERS
--------------------------------------------------------

  ALTER TABLE "XEROJ"."USERS" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."USERS" ADD PRIMARY KEY ("STUDENT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "XEROJ"."USERS" MODIFY ("LAST_NAME" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."USERS" MODIFY ("FIRST_NAME" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table BORROWED_BOOKS
--------------------------------------------------------

  ALTER TABLE "XEROJ"."BORROWED_BOOKS" MODIFY ("BORROWER_ID" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BORROWED_BOOKS" MODIFY ("STATUS" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BORROWED_BOOKS" ADD CONSTRAINT "SYS_C007091" PRIMARY KEY ("BORROW_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "XEROJ"."BORROWED_BOOKS" MODIFY ("BORROW_DUE" NOT NULL ENABLE);
  ALTER TABLE "XEROJ"."BORROWED_BOOKS" MODIFY ("BOOK_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table BORROWED_BOOKS
--------------------------------------------------------

  ALTER TABLE "XEROJ"."BORROWED_BOOKS" ADD CONSTRAINT "FK_BOOK_ID" FOREIGN KEY ("BOOK_ID")
	  REFERENCES "XEROJ"."BOOKS" ("BOOK_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "XEROJ"."BORROWED_BOOKS" ADD CONSTRAINT "FK_BORROWER_ID" FOREIGN KEY ("BORROWER_ID")
	  REFERENCES "XEROJ"."USERS" ("STUDENT_ID") ON DELETE CASCADE ENABLE;
